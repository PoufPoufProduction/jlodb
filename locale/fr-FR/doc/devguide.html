<!DOCTYPE HTML>
<html xmlns=http://www.w3.org/1999/xhtml xml:lang=fr lang=fr>

<head>
    <meta http-equiv=Content-Type content=text/html; charset=UTF-8>
    <meta name=mobile-web-app-capable content=yes>
    <title>Guide du développeur jLoDb</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <link type=text/css rel=stylesheet href=css/style.css media=all />
</head>

<body>

<h1>Informations générales</h1>
<h2>Noms des exercices</h2>
<p>Le nom des exercices est formé ainsi  :  ( S + E ) + FI + ID.</p>
<ul>
<li>S est la première lettre du nom de l'activité.</li>
<li>E est la dernière lettre du nom de l'activité.</li>
<li>FI sont les 2 premières lettres du nom du fichier dans lequel est défini l'exercice.</li>
<li>ID est l'identifiant de l'exercice.</li>
</ul>
<p>Ainsi <b>ceac001</b> désigne l'exercice appartenant à l'activité <b>code</b> (ce), définit dans un fichier dont le nom commence par ac (<b>action.rdf</b> en l'occurence) et dont l'identifiant est <b>001</b>.</p>
<p>Une exception notable  :  avec le fichier <b>xx.rdf</b>, la valeur de FI est nulle et l'identifiant a une longueur maximale de 2.</p>

<h1>API</h1>
<p>L'ensemble des arguments sont de type GET sauf lorsque cela est précisé. Par ailleurs, les arguments obligatoires sont suivis d'une étoile *.</p>
<h2>Site principal de jLoDb</h2>
<h3>api/exercice.php</h3>
<p><b>exercice.php</b> fournit la description complète d'un exercice de la base correspondant aux différents paramètres. Sans argument ou lorsque plusieurs exercices correspondent aux critéres, l'exercice renvoyé est choisi aléatoirement parmi les candidats potentiels. La description retournée par l'API sert directement à l'exécution de l'exercice.</p>
<h4>arguments</h4>
<ul>
<li><b>activity</b> : nom de l'activité de l'exercice. Accepte également une liste d'activités séparées par une virgule</li>
<li><b>classification</b> : discipline traitée par l'exercice. Accepte également une liste de classification séparées par une virgule</li>
<li><b>levelmin</b> : niveau scolaire minimum de l'exercice (de 1 à 5)</li>
<li><b>levelmax</b> : niveau scolaire maximum de l'exercice (de 1 à 5)</li>
<li><b>diffmin</b> : difficulté minimum de l'exercice (de 1 à 5)</li>
<li><b>diffmax</b> : difficulté maximum de l'exercice (de 1 à 5)</li>
<li><b>extendmin</b> : durée minimum de l'exercice en minute (de 1 à 60)</li>
<li><b>extendmax</b> : durée maximum de l'exercice en minute (de 1 à 60)</li>
<li><b>id</b> : identifiant de l'exercice. Lorsque l'identifiant n'est pas fourni (typiquement dans le cas d'un exercice aléatoire portant sur une activité ou une classification), les exercices portant le tag 'debug' sont écartés des résultats potentiels.</li>
</ul>
<h4>résultats</h4>
<ul>
<li><b>id</b> : identifiant de l'exercice</li>
<li><b>lang</b> : langue utilisée sur le serveur</li>
<li><b>activity</b> : activité de l'exercice</li>
<li><b>label</b> : nom de l'activité</li>
<li><b>title</b> : description de l'exercice</li>
<li><b>level</b> : niveau scolaire de l'exercice</li>
<li><b>difficulty</b> : difficulté de l'exercice</li>
<li><b>time</b> : durée de résolution moyenne de l'exercice</li>
<li><b>classification</b> : classification de l'exercice</li>
<li><b>ext</b> : utilisation d'une librairie externe</li>
<li><b>data</b> : donnée de l'exercice (spécifique à chaque activité)</li>
<li><b>locale</b> : localisation</li>
</ul>
<h4>erreurs</h4>
<ul>
<li><b>10 : can not find exercice</b>. Aucun exercice ne correspond aux paramètres demandés.</li>
</ul>
<h3>api/activity.php</h3>
<p><b>activity.php</b> renvoit un aperçu d'une activité donnée ainsi qu'une image de son utilisation.</p>
<h4>arguments</h4>
<ul>
<li><b>name</b>* : identifiant de l'activité..</li>
</ul>
<h4>résultats</h4>
<ul>
<li><b>name</b> : identifiant de l'activité</li>
<li><b>lang</b> : localisation du serveur</li>
<li><b>label</b> : nom localisé de l'activté</li>
<li><b>exercices</b> : nombre d'exercices rédigés avec cette activité</li>
<li><b>classification</b> : [] ensemble des classifications référencées par les exercices</li>
<li><b>files</b> : [] liste des fichiers statiques de description</li>
<li><b>locale</b> : {} données localisées nécessaires à la bonne exécution du jeu</li>
</ul>
<h4>erreurs</h4>
<ul>
<li><b>8 : can not find activity</b>. L'activité demandée n'existe pas.</li>
<li><b>9 : activity name is missing</b>. Le paramètre name est absent de la requête.</li>
</ul>


<h1>Activités et exercices</h1>
<h2>hammer</h2>
<h3>Paramètres</h3>
    <ul>
        <li><b>mode : string</b> définit le mode de jeux [default, classic]</li>
        <li><b>tag  : string</b> définit le tag (la vignette) à afficher. Un texte finissant par ".svg" est traité en tant qu'image (le préfixe /res/image/ est inutile car rajouté automatiquement)</li>
        <li><b>exercice : string,[]</b> définit l'intitulé de l'exercice.</li>
        <li><b>fontex : float</b> définit la fonte de l'exercice [1 par défaut].</li>
        <li><b>totaltime : int</b> définit la durée en secondes de l'exercice [40 par défaut].</li>
        <li><b>freq : float</b> définit, en secondes, la fréquence moyenne d'apparition des éléments [1 élément par seconde par défaut].</li>
        <li><b>duration : float</b> définit la durée en secondes d'apparition des éléments. La durée d'animation est incluse dedans. [4 secondes par défaut].</li>
        <li><b>animation : float</b> définit la durée d'animation des éléments [1 par défaut].</li>
        <li><b>good : [{}]</b> liste l'ensemble des éléments à cliquer
            <ul>
                <li><b>type : string</b> définit le type de l'élément [img,txt,sig]</li>
                <li><b>value : string</b> définit le contenu de l'élément. Comme pour le tag, un texte finissant par ".svg" est traité en tant qu'image.</li>
                <li><b>gen : function</b> permet de générer automatiquement un paramètre 'value'</li>
            </ul>
        </li>
        <li><b>wrong : [{}]</b> liste l'ensemble des éléments sur lesquels il ne faut pas cliquer. Construit comme 'good'</li>
    </ul>
<h2>logo</h2>
<h3>Paramètres</h3>
    <ul>
        <li><b>a : {}</b> permet de définir les commandes autorisées par l'exercice.
            <ul>
                <li><b>op : []</b> liste les opérations [av, re, td, tr, co, fo, ct, mt, lc, bc, or, ca, po, xx, yy, zz, ii, jj]</li>
                <li><b>va : []</b> liste les valeurs [V000, V001, V002, ..., V090, ..., V200, ..., X, Y, Z, I, J, black, white, green, red, blue ]</li>
                <li><b>ma : []</b> liste les opérations mathématiques [plus, minus, neg, mult, div, modulo, pow2, sqrt, log, exp, cos, sin, tan, atan]</li>
                <li><b>cl : []</b> liste les opérateurs de contrôle [rep, call1, call2, call3, fct1, fct2, fct3, if]</li>
            </ul>
        </li>
        <li><b>bg : []</b> liste les éléments présents dans le fond de l'image (grille, indications textuelles, figure en pointillé).</li>
        <li><b>result : {}</b> définit les critères d'évaluation de l'exercice.
            <ul>
                <li><b>nb : int</b> définit le nombre de segments à tracer.</li>
                <li><b>values : []</b> liste les segments à tracer. Chaque segment est défini ainsi [x1,y1,x2,y2,couleur].</li>
                <li><b>ct : bool</b> (facultatif) précise l'état final de la tortue (caché ou non).</li>
                <li><b>bg : int</b> (facultatif) précise la couleur finale du fond de l'écran.</li>
            </ul>
        </li>
    </ul>
<h3>Autres</h3>
    <p><b>Générateur</b> : lox</p>
<h2>Sudoku</h2>
<h3>Format</h3>
<p>Au sein du projet jLoDb, les grilles de Sudoku sont définies par une suite de <b>81 caractères</b> ([1-9a-i]{81}) définissant chacune des 81 cases de la grille.</p>
<ul>
<li>Les nombres de 1 à 9 correspondent aux valeurs initialement exposées.</li>
<li>Les lettres de 'a' à 'i' correspondent aux valeurs non exposées et servent uniquement pour la validation. Le 'a' représente une valeur 1 à trouver, le 'b' une valeur 2, etc.</li>
</ul>
<h3>Générateurs et convertisseurs</h3>
<ul>
<li>Le logiciel <b>Sudoku</b> écrit par Michael Kennett est disponible sur les plateformes GNU/Linux. Il permet la génération de grilles ainsi que leur résolution. Il permet également d'évaluer les difficultés de résolution suivant 5 niveaux différents (very easy, easy, medium, hard, fiendish). Pour l'heure, c'est l'évaluation, ramenée de 1 à 5, de ce logiciel qui sert de référence dans la base <b>jLoDb</b>.</li>
<li>Le logiciel du même nom <b>Sudoku</b>, rapidement écrit en C++ par Johann C et disponible dans data/sudoku/, permet également de générer des grilles. L'intérêt principal de ce binaire est de proposer une symétrie des valeurs initialement exposées.
    <ul>
        <li>0 : aucune symétrie</li>
        <li>1 : symétrie suivant l'axe horizontal</li>
        <li>2 : symétrie suivant l'axe vertical</li>
        <li>3 : symétrie centrale</li>
        <li>4 : symétrie diagonale</li>
        <li>5 : symétrie totale</li>
    </ul>
    De plus, le format de sortie est compatible avec le logiciel précédent qui peut ainsi nativement évaluer la grille générée.
</li>
<li>Les scripts <b>rdf2std</b>, <b>rdf2compact</b> et <b>rdf2csv</b> (dans data/sudoku) permettent, respectivement, d'exporter les grilles telles qu'elles sont stockées dans les fichiers rdf, vers les formats standards, compact et csv.</li>
</ul>
</body>
</html>
