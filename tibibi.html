<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Tibibi</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript" src="js/jquery.svg.min.js"></script>
    <script type="text/javascript" src="js/jquery.cookie.js"></script>
    <script type="text/javascript" src="js/jquery.jlodb.js"></script>
    <script type="text/javascript" src="js/jquery.jlodb.menu.js"></script>
    <script type="text/javascript" src="js/jquery.jlodb.browser.js"></script>
    <script type="text/javascript" src="js/jlodb-ext.js"></script>
    <script type="text/javascript" src="user/user.js"></script>
    <link type="text/css" rel="stylesheet" href="css/jlodb.css" media="all" />
    <link type="text/css" rel="stylesheet" href="user/style.css" media="all" />
    <link type="text/css" rel="stylesheet" href="css/browser.css" media="all"/>
    <link rel="apple-touch-icon-precomposed" href="mods/tibibi/res/img/icon/icon144.png" />
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="mods/tibibi/res/img/icon/icon72.png" />
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="mods/tibibi/res/img/icon/icon114.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="mods/tibibi/res/img/icon/icon144.png" />
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <style>
#bimain                                 { display:relative; }
#bitopmenu                              { width:100%; height:1.2em; background-color:gray; font-size:.5em; padding:.1em; }
#bitopmenu>*                            { float:left; }
#bitopmenu>select                       { font-size:1em; height:1.2em; width:10em; border:0; padding-left:.5em; background-color:#555; color:white; }
#bitopmenu>.icon                        { font-size:1em; padding:.1em; cursor:pointer; }
#bitopmenu>.icon.l                      { margin-left:.5em; background-color:#333;  border-radius:.5em 0 0 .5em;}
#bitopmenu>.icon.e                      { background-color:#444; }
#bitopmenu>.icon.s                      { background-color:#A11 !important; }
#bitopmenu>.icon.d                      { background-color:#333;  border-radius:0 .5em .5em 0;}
#bitopmenu>.icon.x                      { margin-left:.5em; background-color:#333;  border-radius:.5em; }
#bitopmenu #bigdr                       { display:none; }
#bimenu                                 { font-size:2em; height:5.65em; }
#biedit                                 { display:none; height:11.3em; width:17em; }
#bicontent.s #bimenu                    { display:none; }
#bicontent.s #biedit                    { display:inherit; }
#bilist                                 { float:left; background-color:#555; width:6em; height:100%; font-size:.5em;}
#bilist #bielts                         { width:100%; height:25.8em; font-size:.8em; overflow:auto;}
#bilist #bielts .elt                    { width:6.5em; height:1.4em; margin-top:.1em; cursor:pointer; }
#bilist #bielts .l                      { clear:both; float:left; background-color:#447; border-radius:.5em 0 0 .5em; width:1em; text-align:center; color:white; margin-left:.1em; }
#bilist #bielts .v                      { float:left; background-color:#222; color:white; width:5em; padding-left:.2em; border-radius:0 .5em .5em 0;}
#bilist #bielts .elt.s .l               { background-color:red; }
#bilist #bielts .elt.s .v               { background-color:red; }
#bilist #bieltact                       { width:100%; height:1em; background-color:#333;}
#bilist #bieltact .icon                 { float:left; opacity:0.1; cursor:default;}
#bilist #bieltact .icon.s               { background:red; }
#bilist #bieltact.s .icon               { opacity:1; cursor:pointer; }
#bilist #biactions                      { width:100%; height:1em; background-color:#222;}
#bilist #biactions .icon                { margin-left:.4em; float:left; cursor:pointer;}
#bibrowser                              { float:left; background-color:#AAA; width:13em; height:100%; }
#bicontent                              { width:100%; height:100%; background-color:#222; }
.bipopup                                { position:absolute; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); display:none; }
.bipopup>div                            { font-size:.8em; width:15em; background-color:#555; border-radius:.75em; padding:.5em; margin-top:3em; margin-left:2em; }
.bipopup>div>div                        { width:16em; }
.bipopup input                          { float:left; font-size:1em; height:1.19em; width:13.3em; border:0; padding-left:.5em; background-color:#AAA; color:white; border-radius:.5em 0 0 .5em;}
.bipopup .icon                          { padding:.1em; margin-left:1em; background-color:#333;  border-radius:0 .5em .5em 0;}
#bipopup2 textarea                      { font-size:.5em; border-radius:.5em; margin:0; border:0; background-color:#DDD; width:30em; height:8em; resize:none;  }
#bipopup2 .button                       { background-color:#999; border-radius:.5em; text-align:center; cursor:pointer; width:15em; }
#bimain #jbrowser #patab .small div     { font-size:.8em; }
#bimain #jbrowser #jresults             { height: 15.7em; }
#bimain #jbrowser.reduce #jresults      { height: 25.5em; }
#bimenu .menu                           { font-size:1.3em !important; }
#biscreen                               { position:absolute; top:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5); display:none; z-index:3; color:limegreen; }
#biscreen>div#quit                      { position:absolute; top:0; left:0; font-size:1.2em; width:1em; height:1em; cursor:pointer; }
#biscreen>div#list                      { font-size:.25em; width:61em; height:41em; margin:4em 1em; padding:.5em; background-color:black;overflow:auto; }
#biscreen #list .drop                   { font-size:.8em; float:left; width:12em; height:12em; margin:.25em; background-color:rgba(200,220,255,0.1); overflow:visible;}
#biscreen #list .drag                   { position:relative; height:12em; background-color:gray; cursor:move; background-image:url('res/img/background/landscape/nosnapshot01.svg');background-repeat:no-repeat;}
#biscreen #list .drag .eximg            { font-size:3em; width: 4em; height: 3em; }
#biscreen #list .drag .eximg>img.snap   { width: 4em; height: 3em; }
#biscreen #list .drag .extitle          { background-color:white; height:4.5em; border:1px solid black; border-width:1px 0 0 0; font-size:.7em;color:black;text-align:justify;padding:0 .5em; }
#biscreen #list .drag .exid             { position:absolute; color:black; width:5.5em; background-color:white; top:.3em; left:-0.1em; padding-left:.5em; border-radius:0 .5em .5em 0;border:1px solid black;}
    </style>
    <script>


user.onEvent = function() {
    if (user.settings && user.settings.name) { tibibi.group.list(); tibibi.course.list(); }
    else { $("#bimenu").html(""); $("#bigcourses").html(""); $("#biggroups").html("");
            $("#bigde").removeClass("s"); $("#bicontent").removeClass("s"); $("#logpanel").show(); }
};

var tibibi = {
    lang    : "",
    url     : "",
    menu: {
        build:function(_value) {
            user.getJSON("mods/tibibi/api/link.php",{course:$("#bigcourses").val(), tibibi:_value?_value:$("#biggroups").val()}, "",
                function(_data) {
                if (!_data.description) { _data.description=""; }
                for (var i=_data.description.length; i<tibibi.course.ex.length; i++) { _data.description+="."; }

                $("#bimenu").menu({
                    list    : tibibi.course.ex,
                    state   : _data.description,
                    onupdate: function($this, _state) {
                        if ($("#biggroups").val().length) {
                            user.getJSON("mods/tibibi/api/link.php",
                                {value:_state, course:$("#bigcourses").val(), tibibi:$("#biggroups").val()}, "", function(_data) {});
                    } },
                    onclick : function($this, _args) {
                        $("#waiting").show().find("div").addClass("running");
                        $("#activity").jlodb({
                            onstart:    function($this) { $("#rmenu").hide(); $this.parent().show();
                                                          $("#waiting").hide().find("div").removeClass("running"); },
                            onfinish:   function($this, _hide) { if (_hide) { $("#rmenu").show(); $this.parent().hide(); }
                                                                 $("#score").score('hide'); },
                            onscore:    function($this, _ret) {
                                var isnext = false;
                                if (_ret.score>=2) { isnext = $("#bimenu").menu('score', _ret.score).menu('more'); }
                                $("#score #next").toggle(isnext);
                                $("#score").score('show',_ret.score);
                                return true; } },_args);
                    }
                });
            });
        }
    },
    popup: {
        cbk: function() {},
        close: function() { $("#bipopup1").hide(); },
        valid: function() { tibibi.popup.cbk(); tibibi.popup.close(); }
    },
    group: {
        timer: 0,
        open: function() {
            $("#bipopup1 input").val("");
            tibibi.popup.cbk = function() {
                if ($("#bipopup1 input").val().length) {
                    user.getJSON("mods/tibibi/api/tibibi.php",{action:"new",value:$("#bipopup1 input").val()}, "", function(_data){
                        tibibi.group.list(_data.value);
                        tibibi.menu.build($("#bipopup1 input").val());
                    });
                }
            }
            $("#bipopup1").show();
        },
        remove: function() {
            if (tibibi.group.timer) {
                clearTimeout(tibibi.group.timer); tibibi.group.timer = 0; $("#bigdg").removeClass("s");
                user.getJSON("mods/tibibi/api/tibibi.php",{action:"del",value:$("#biggroups").val()}, "", function(_data){
                    tibibi.group.list();
                    $("#biggroups").val("");
                    tibibi.menu.build();
                });
            }
            else {
                if ($("#biggroups").val().length) {
                    $("#bigdg").addClass("s");
                    tibibi.group.timer = setTimeout(function() { $("#bigdg").removeClass("s"); tibibi.group.timer = 0; }, 500);
                }
            }
        },
        edit: function() {
            if ($("#biggroups").val().length) {
                $("#bipopup1 input").val($("#biggroups").val());
                tibibi.popup.cbk = function() {
                    user.getJSON("mods/tibibi/api/tibibi.php",{action:"upd",tibibi:$("#biggroups").val(), value:$("#bipopup1 input").val()}, "", function(_data){ tibibi.group.list(_data.value); });
                }
                $("#bipopup1").show();
            }
        },
        list: function(_val) {
            user.getJSON("mods/tibibi/api/tibibi.php",{}, "", function(_data) {
                $("#biggroups").html("<option></option>");
                for (var g in _data.tibibis) {
                    html = "<option";
                    if (_data.tibibis[g]==_val) { html+=" selected='selected'"; }
                    html+=">"+_data.tibibis[g]+"</option>";
                    $("#biggroups").append(html);
                }
            });
        }
    },
    course: {
        timer: 0,
        ex:[],
        selected: -1,
        action: function(_action) {
            if ($("#bieltact").hasClass("s")) {
                var upd = false;
                if (_action=="del") {
                    if (tibibi.course.timer) {
                        clearTimeout(tibibi.course.timer); tibibi.course.timer = 0; $("#bidelex").removeClass("s");

                        for (var i=tibibi.course.selected; i<tibibi.course.ex.length-1; i++) {
                            tibibi.course.ex[i] = tibibi.course.ex[i+1];
                        }
                        tibibi.course.ex.pop();
                        tibibi.course.selected = -1;
                        upd = true;
                    }
                    else {
                        $("#bidelex").addClass("s");
                        tibibi.course.timer = setTimeout(function() { $("#bidelex").removeClass("s"); tibibi.course.timer = 0; }, 500);
                    }
                }
                else if (_action=="up" && tibibi.course.selected>0) {
                    var tmp = tibibi.course.ex[tibibi.course.selected];
                    tibibi.course.ex[tibibi.course.selected] = tibibi.course.ex[tibibi.course.selected-1];
                    tibibi.course.ex[--tibibi.course.selected] = tmp;
                    upd = true;
                }
                else if (_action=="down" && tibibi.course.selected<tibibi.course.ex.length-1) {
                    var tmp = tibibi.course.ex[tibibi.course.selected];
                    tibibi.course.ex[tibibi.course.selected] = tibibi.course.ex[tibibi.course.selected+1];
                    tibibi.course.ex[++tibibi.course.selected] = tmp;
                    upd = true;
                }
                else if (_action=="look") {
                    $("#bibrowser").browser("id",tibibi.course.ex[tibibi.course.selected]);
                }
                else if (_action=="exe") {  tibibi.run({id:tibibi.course.ex[tibibi.course.selected]}); }
                else if (_action=="snapshot") {
                    window.open('demo.html?id='+tibibi.course.ex[tibibi.course.selected],'_blank',
                        'width=640, height=480,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,status=no,titlebar=no');
                }
                if (upd) { tibibi.course.update(); }
            }
        },
        open: function() {
            $("#bipopup1 input").val("");
            tibibi.popup.cbk = function() {
                if ($("#bipopup1 input").val().length) {
                    user.getJSON("mods/tibibi/api/course.php",{action:"new",value:$("#bipopup1 input").val()}, "", function(_data){
                        tibibi.course.list(_data.value);
                        tibibi.course.load($("#bipopup1 input").val(),false,true);
                    });
                }
            }
            $("#bipopup1").show();
        },
        update: function() {
            user.getJSON("mods/tibibi/api/course.php",{action:"upd",course:$("#bigcourses").val(), description:tibibi.course.ex}, "", function(_data){
                tibibi.course.load($("#bigcourses").val(),true,false);
                tibibi.course.highlight();
            });
        },
        select: function(_id) {
            if (_id!=-1) {
                if ($($("#bielts .elt").get(_id)).hasClass("s")) {
                    $("#bielts .elt").removeClass("s");
                    $("#bieltact").removeClass("s");
                    _id = -1;
                }
                else {
                    $("#bielts .elt").removeClass("s");
                    $($("#bielts .elt").get(_id)).addClass("s");
                    $("#bieltact").addClass("s");
                }
            }
            else {
                $("#bielts .elt").removeClass("s");
                $("#bieltact").removeClass("s");
            }
            tibibi.course.selected=_id;
        },
        load: function(_value, _select, _menu) {
            if (_value) {
                user.getJSON("mods/tibibi/api/course.php",{value:_value}, "", function(_data){
                    var ex=[];
                    if (_data.description && _data.description.length) { ex = _data.description.split(","); }
                    if (_menu) { tibibi.menu.build(); }
                    $("#bielts").html("");
                    for (var e in ex) {
                        $("#bielts").append(
                            "<div class='elt' id='"+e+"' onclick='tibibi.course.select("+e+")'>"+
                            "<div class='l'>"+(parseInt(e)+1)+"</div>"+
                            "<div class='v'>"+ex[e]+"</div></div>");
                    }
                    tibibi.course.ex = ex;
                    tibibi.course.select(_select?tibibi.course.selected:-1);
                    tibibi.course.highlight();
                });
            }
            else {
                $("#bimenu").html("");
                $("#bigde").removeClass("s");
                $("#bicontent").removeClass("s");
                tibibi.course.ex=[];
                tibibi.course.selected = -1;
            }
        },
        remove: function() {
            if (tibibi.course.timer) {
                clearTimeout(tibibi.course.timer); tibibi.course.timer = 0; $("#bigdc").removeClass("s");
                user.getJSON("mods/tibibi/api/course.php",{action:"del",value:$("#bigcourses").val()}, "", function(_data){
                    tibibi.course.list(); tibibi.course.load("",false,false);
                });
            }
            else {
                if ($("#bigcourses").val().length) {
                    $("#bigdc").addClass("s");
                    tibibi.course.timer = setTimeout(function() { $("#bigdc").removeClass("s"); tibibi.course.timer = 0; }, 500);
                }
            }
        },
        edit: function() {
            if ($("#bigcourses").val().length) {
                $("#bipopup1 input").val($("#bigcourses").val());
                tibibi.popup.cbk = function() {
                    user.getJSON("mods/tibibi/api/course.php",{action:"upd",course:$("#bigcourses").val(), value:$("#bipopup1 input").val()}, "", function(_data){
                        tibibi.course.list(_data.value); });
                }
                $("#bipopup1").show();
            }
        },
        list: function(_val) {
            user.getJSON("mods/tibibi/api/course.php",{action:"list"}, "", function(_data) {
                $("#bigcourses").html("<option></option>");
                for (var g in _data.courses) {
                    html = "<option";
                    if (_data.courses[g]==_val) { html+=" selected='selected'"; }
                    html+=">"+_data.courses[g]+"</option>";
                    $("#bigcourses").append(html);
                }
            });
        },
        expo: function() {
            var html="";
            for (var i in tibibi.course.ex) { if (html) { html+=","; } html+=tibibi.course.ex[i]; }
            $("#bipopup2 textarea").val(html);
            $("#bipopup2 .button").hide();
            $("#bipopup2").show();
        },
        impo: function() {
            $("#bipopup2 textarea").val("");
            $("#bipopup2 .button").show();
            $("#bipopup2").show();
        },
        importex: function() {
            if ($("#bipopup2 textarea").val()) {
                var ex = $("#bipopup2 textarea").val().split(",");
                for (var i in ex) { tibibi.course.ex.push(ex[i]); }
                tibibi.course.update();
                $("#bipopup2").hide();
            }
        },
        highlight: function() {
            $("#jresults .elt").removeClass("s");
            for (var i in tibibi.course.ex) { $("#jresults #"+tibibi.course.ex[i]).addClass("s"); }
        },
        updover: function() {
            var html="";
            tibibi.course.ex=[];
            $("#biscreen #list .drop").each(function(){ if (!$(this).html().length) { $(this).detach(); }});
            $("#biscreen #list .exid").each(function(_index){ $(this).attr("id","v"+_index);
                if (_index) { html+=","; } html+=$(this).text(); tibibi.course.ex.push($(this).text()); });
            tibibi.course.update();
        },
        droppable: function($elt) {
            $elt.droppable({accept:".drag",
                        drop:function(event, ui) {
                            var $d = $("<div class='drop'></div>");
                            if (parseInt($(ui.draggable).find(".exid").attr("id").substr(1))>
                                parseInt($(this).find(".exid").attr("id").substr(1)))
                                { $d.insertBefore(this); } else { $d.insertAfter(this); }
                            $(ui.draggable).detach().appendTo($d);
                            tibibi.course.droppable($d);
                            tibibi.course.updover();
                    } });
        },
        snapshot:function() {
            window.open('export.html?id='+encodeURIComponent(tibibi.course.ex),'_blank'); 
        },
        overview: function() {
            var html="";
            for (var i in tibibi.course.ex) { if (html) { html+=","; } html+=tibibi.course.ex[i]; }
             $.getJSON("api/exercice.php?id="+html, function(data2) {
                $("#biscreen #list").html("");
                for (var i in tibibi.course.ex) {
                    var elt = 0;
                    for (var j in data2.exercices) { if (tibibi.course.ex[i]==data2.exercices[j].id) { elt = data2.exercices[j]; } }
                    if (elt) {
                        var $drop = $("<div class='drop'></div>");
                        var $drag = $("<div class='drag'></div>");
                        var img = "<div class='eximg'>";
                        if (tibibi.url) {
                            var url = tibibi.url+"/res/img/exercices/"+elt.activity+"/";
                            if (elt.id.length>4) { url+=elt.id[2]+elt.id[3]+"/"; } else { url+="xx/"; }
                            url += elt.id+".png";
                            img +="<img class='snap' src='"+url+"'/>";
                        }
                        img += "</div>";
                        $drag.append(img);
                        $drag.append("<div class='exid'>"+elt.id+"</div>");
                        $drag.append("<div class='extitle'>"+elt.label+"</div>");
                        $drop.append($drag);
                        $drag.draggable({ containment:$("#biscreen #list"), appendTo:$("#biscreen #list"), revert:false, stack:".drag",
                            stop:function(event, ui) { $(this).css("top",0).css("left",0); }});
                        tibibi.course.droppable($drop);
                        $("#biscreen #list").append($drop);
                    }
                }
                tibibi.course.updover();
                $("#biscreen").show();
            });
        }
    },
    edit: function() {
        if ($("#bigde").hasClass("s")) {
            $("#bigde").removeClass("s");
            $("#bicontent").removeClass("s");
            tibibi.menu.build();
        }
        else {
            if ($("#bigcourses").val()) {
                $("#bigde").addClass("s");
                $("#bicontent").addClass("s");
                $("#bibrowser").browser('onshow');
            }
        }
    },
    run : function(_args) {
        $("#waiting").show().find("div").addClass("running");
        $("#activity").jlodb({ onstart: function($this) { $("#bicontent").hide(); $this.parent().show();
                                                          $("#waiting").hide().find("div").removeClass("running"); },
                               onfinish:function($this) { $("#bicontent").show(); $this.parent().hide();
                                                          $("#score").score('hide'); }},_args);
    },
    qtimer : 0,
    quit : function() {
        if (urlargs.from) {
            if (tibibi.qtimer) { clearTimeout(tibibi.qtimer); }
            if ($("#bigdr").hasClass("s"))  { $("#bigdr").removeClass("s"); window.location = urlargs.from; }
            else                            { $("#bigdr").addClass("s");
                                              tibibi.qtimer = setTimeout(function() { $("#bigdr").removeClass("s"); tibibi.qtimer = 0; },500); }
        }
    }
};

var urlargs = {}

$(window).ready(function() {

	$(window).resize();

    // URL ARGUMENTS
    var a = location.search.substring(1).split('&');
    for (var i in a) { var p= a[i].split('='); urlargs[p[0]]=p[1]; }

    if (urlargs.from) { $("#bigdx").hide(); $("#bigdr").show(); }

    $.getJSON("api/checkdb.php", function (_check) {

        if (_check.status=="success") {
            tibibi.lang = _check.lang;
            tibibi.url  = _check.url;

            user.load.logpanel($("#bimain"), {}, function() { user.init(tibibi.lang); });
            
            // BROWSER LOADING
            $.getJSON("locale/"+tibibi.lang+"/classification.json", function(data) {
                tibibi.classification = $(data);
                $("#bibrowser").browser({url:tibibi.url, lang:tibibi.lang, classification:tibibi.classification,
                    onRefresh:function($this) { tibibi.course.highlight(); },
                    context:[
                    { icon:"res/img/default/white/run.svg",       process:function(_id){ tibibi.run({id:_id}); } },
                    { icon:"res/img/default/white/import.svg",    process:function(_id){
                        if ($("#bielts .elt.s").length)  { tibibi.course.ex.splice($("#bielts .elt.s").attr("id"),0,_id); }
                        else                            { tibibi.course.ex.push(_id); }
                        tibibi.course.update();
                    } },
                    { icon:"res/img/default/white/snapshot.svg",  process:function(_id) {
                        window.open('demo.html?id='+_id,'_blank',
                            'width=640, height=480,toolbar=no,location=no,status=no,menubar=no,'+
                            'scrollbars=no,resizable=no,status=no,titlebar=no'); }
                    }
                    ]
                });
            });

        }
        else {
            $("#bimain").html(_check.status+": "+_check.textStatus);
        }
    });
    
    $("#score").score({
        onreload:function($this) { $('#activity').jlodb('reload'); },
        onmenu:  function($this) { $('#activity').jlodb('close', true); },
        onnext:  function($this) { $('#activity').jlodb('close',false);$('#bimenu').menu('next'); } 
    });

});
    </script>
</head>

<body>
    <div id="bimain">
        <div id="bitopmenu">
            <div class="icon l" onclick="tibibi.group.open();" ontouchstart="tibibi.group.open();event.preventDefault();">
                <img src="res/img/default/white/newpeople.svg"/></div>
            <select id="biggroups" onchange="tibibi.menu.build();"><option></option></select>
            <div class="icon e" onclick="tibibi.group.edit();" ontouchstart="tibibi.group.edit();event.preventDefault();">
                <img src="res/img/default/white/edit.svg"/></div>
            <div id="bigdg" class="icon d" onclick="tibibi.group.remove();"
                                         ontouchstart="tibibi.group.remove();event.preventDefault();">
                <img src="res/img/default/white/delete.svg"/></div>

            <div class="icon l" onclick="tibibi.course.open();" ontouchstart="tibibi.course.open();event.preventDefault();">
                <img src="res/img/default/white/newcourse.svg"/></div>
            <select id="bigcourses" onchange="tibibi.course.load($(this).val(),false,true);"></select>
            <div class="icon e" onclick="tibibi.course.edit();" ontouchstart="tibibi.course.edit();event.preventDefault();">
                <img src="res/img/default/white/edit.svg"/></div>
            <div id="bigdc" class="icon d" onclick="tibibi.course.remove();" 
                                         ontouchstart="tibibi.course.remove();event.preventDefault();">
                <img src="res/img/default/white/delete.svg"/></div>

            <div id="bigde" class="icon x" onclick="tibibi.edit();" ontouchstart="tibibi.edit();event.preventDefault();">
                <img src="res/img/default/white/settings.svg"/>
            </div>

            <div id="bigdx" class="icon x" onclick="user.logout($(this));"  ontouchstart="user.logout($(this));event.preventDefault();">
                <img src="res/img/default/white/logout.svg"/>
            </div>
            <div id="bigdr" class="icon x" onclick="tibibi.quit();"  ontouchstart="tibibi.quit();event.preventDefault();">
                <img src="res/img/default/white/valid.svg"/>
            </div>

        </div>
        <div id="bicontent">
            <div id="bimenu"></div>
            <div id="biedit">
                <div id="bilist">
                    <div id="bielts"></div>
                    <div id="bieltact">
                        <div class="icon" onclick="tibibi.course.action('up');"><img src="res/img/default/white/up.svg"/></div>
                        <div class="icon" onclick="tibibi.course.action('down');"><img src="res/img/default/white/down.svg"/></div>
                        <div class="icon" onclick="tibibi.course.action('exe');"><img src="res/img/default/white/run.svg"/></div>
                        <div class="icon" onclick="tibibi.course.action('snapshot');"><img src="res/img/default/white/snapshot.svg"/></div>
                        <div class="icon" onclick="tibibi.course.action('look');"><img src="res/img/default/white/look.svg"/></div>
                        <div id="bidelex" class="icon" onclick="tibibi.course.action('del');"><img src="res/img/default/white/delete.svg"/></div>
                    </div>
                    <div id="biactions">
                        <div class="icon" onclick="tibibi.course.expo();"><img src="res/img/default/white/export.svg"/></div>
                        <div class="icon" onclick="tibibi.course.impo();"><img src="res/img/default/white/import.svg"/></div>
                        <div class="icon" onclick="tibibi.course.overview();"><img src="res/img/default/white/snapshot.svg"/></div>
                        <div class="icon" onclick="tibibi.course.snapshot();"><img src="res/img/default/white/list.svg"/></div>
                    </div>
                </div>
                <div id="bibrowser"></div></div>
        </div>

        <div id="waiting"><div><img src="res/img/default/anim/waiting.svg"/></div></div>

        <div id="score"></div>

        <div id="biscreen">
            <div id="list"></div>
            <div id="quit" ontouchstart="$('#biscreen').hide();event.preventDefault();"
                           onclick="$('#biscreen').hide();"><img src="res/img/default/icon/nw_quit01.svg"/></div>
        </div>
 
        <div class="jlodb">
            <div id="quit" ontouchstart="$('#activity').jlodb('quit');event.preventDefault();"
                           onclick="$('#activity').jlodb('quit');"><img src="res/img/default/icon/nw_quit01.svg"/></div>
            <div id="activity"></div>
        </div>

        <div id="bipopup1" class="bipopup" onclick="$(this).hide();" ontouchstart="$(this).hide();event.preventDefault();">
            <div><div>
				<form action="javascript:tibibi.popup.valid()">
					<input type="text" onclick="event.stopPropagation();" ontouchstart="event.stopPropagation();">
					</input>
					<div class="icon" onclick="$(this).parent().submit();event.stopPropagation();"
                                  ontouchstart="$(this).parent().submit();event.stopPropagation();event.preventDefault();">
						<img src="res/img/default/white/valid.svg"/>
					</div>
					<input type="submit" style="display:none;"/>
				</form>
            </div></div>
        </div>


        <div id="bipopup2" class="bipopup" onclick="$(this).hide();" ontouchstart="$(this).hide();event.preventDefault();">
            <div onclick="event.stopPropagation();" ontouchstart="event.stopPropagation();"><div>
                <textarea></textarea>
                <div class="button" onclick="tibibi.course.importex();"
                                    ontouchstart="tibibi.course.importex();event.preventDefault();">Import</div>
            </div></div>
        </div>

    </div>
</body>
